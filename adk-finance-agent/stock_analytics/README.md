# Stock Analytics Agent π“

κΈμµμ„μ›ν μ£Όμ‹μ‹μ„Έμ •λ³΄ APIλ¥Ό ν™μ©ν• Google ADK κΈ°λ° μ£Όμ‹ λ¶„μ„ μ—μ΄μ „νΈμ…λ‹λ‹¤. SSL νΈν™μ„± λ¬Έμ λ¥Ό ν•΄κ²°ν•μ—¬ ν•κµ­ μ •λ¶€ APIμ™€ μ•μ •μ μΌλ΅ μ—°λ™ν•©λ‹λ‹¤.

## π― μ£Όμ” κΈ°λ¥

- **μ‹¤μ‹κ°„ μ£Όμ‹ μ‹μ„Έ μ΅°ν**: KOSPI, KOSDAQ, KONEX μ‹μ¥ λ°μ΄ν„°
- **μμµμ¦κ¶ μ‹μ„Έ μ΅°ν**: ν€λ“ λ° μμµμ¦κ¶ μ‹μ„Έ μ •λ³΄
- **SSL νΈν™μ„± ν•΄κ²°**: ν•κµ­ μ •λ¶€ APIμ SSL/TLS λ¬Έμ  μλ™ μ²λ¦¬
- **λ‹¤μ–‘ν• κ²€μƒ‰ μµμ…**: μΆ…λ©λ…, ISIN μ½”λ“, λ‚ μ§λ³„ μ΅°ν μ§€μ›

## π”§ κΈ°μ  νΉμ§•

### SSL νΈν™μ„± ν•΄κ²°
```python
# ν•κµ­ μ •λ¶€ API SSL λ¬Έμ λ¥Ό ν•΄κ²°ν•λ” μ»¤μ¤ν…€ μ–΄λ‘ν„°
class KoreanGovAPIAdapter(HTTPAdapter):
    def init_poolmanager(self, *args, **kwargs):
        context = create_urllib3_context()
        context.minimum_version = ssl.TLSVersion.TLSv1_2
        context.verify_mode = ssl.CERT_NONE  # μ •λ¶€ API νΈν™μ„±
```

### μ΄μ¤‘ λ„κµ¬ μ‹μ¤ν…
- **OpenAPIToolset**: ν‘μ¤€ OpenAPI λ„κµ¬ (λ°±μ—…μ©)
- **SSL νΈν™ ν•¨μ**: μ‹¤μ  API νΈμ¶μ© λ©”μΈ λ„κµ¬

## π€ λΉ λ¥Έ μ‹μ‘

### 1. ν™κ²½ μ„¤μ •

#### API ν‚¤ λ°κΈ‰
1. [κ³µκ³µλ°μ΄ν„°ν¬ν„Έ](https://www.data.go.kr/data/15094808/openapi.do) μ ‘μ†
2. νμ›κ°€μ… λ° λ΅κ·ΈμΈ
3. "κΈμµμ„μ›ν_μ£Όμ‹μ‹μ„Έμ •λ³΄" API μ‹ μ²­
4. μΉμΈ ν›„ API ν‚¤ λ°κΈ‰ λ°›κΈ°

#### ν™κ²½λ³€μ μ„¤μ •
```bash
# .env νμΌμ— μ¶”κ°€
STOCK_API_KEY=your_government_api_key_here
```

### 2. μ—μ΄μ „νΈ μ‹¤ν–‰

#### ADK Web UI μ‚¬μ©
```bash
adk web
# http://localhost:8000μ—μ„ stock_analytics μ„ νƒ
```

#### μ§μ ‘ μ‹¤ν–‰
```python
from stock_analytics import root_agent

# μ£Όμ‹ μ‹μ„Έ μ΅°ν μμ‹
result = root_agent.run(
    "μ‚Όμ„±μ „μ μ£Όμ‹ ν„μ¬κ°€λ¥Ό μ•λ ¤μ£Όμ„Έμ”"
)
print(result.stock_result)
```

## π“ μ‚¬μ© μμ‹

### κΈ°λ³Έ μ£Όμ‹ μ΅°ν
```
μ‚¬μ©μ: "μ‚Όμ„±μ „μ μ£Όμ‹ ν„μ¬κ°€ μ•λ ¤μ£Όμ„Έμ”"
β†’ get_stock_price_info_ssl(itms_nm="μ‚Όμ„±μ „μ")
```

### λ‚ μ§λ³„ μ΅°ν
```
μ‚¬μ©μ: "μ–΄μ  SKν•μ΄λ‹‰μ¤ μ£Όκ°€λ”?"
β†’ get_stock_price_info_ssl(itms_nm="SKν•μ΄λ‹‰μ¤", bas_dt="20250819")
```

### μ‹μ¥λ³„ κ²€μƒ‰
```
μ‚¬μ©μ: "μ½”μ¤λ‹¥ μƒμ„ 10κ° μΆ…λ© λ³΄μ—¬μ£Όμ„Έμ”"
β†’ get_stock_price_info_ssl(mrkt_ctg="KOSDAQ", num_of_rows=10)
```

### ν¬ν•¨ κ²€μƒ‰
```
μ‚¬μ©μ: "μ‚Όμ„±μΌλ΅ μ‹μ‘ν•λ” λ¨λ“  μΆ…λ©"
β†’ get_stock_price_info_ssl(like_itms_nm="μ‚Όμ„±")
```

## π› οΈ API νλΌλ―Έν„°

### get_stock_price_info_ssl
| νλΌλ―Έν„° | νƒ€μ… | μ„¤λ… | μμ‹ |
|----------|------|------|------|
| `itms_nm` | str | μ •ν™•ν• μΆ…λ©λ… | "μ‚Όμ„±μ „μ" |
| `like_itms_nm` | str | ν¬ν•¨ κ²€μƒ‰ | "μ‚Όμ„±" |
| `isin_cd` | str | ISIN μ½”λ“ | "KR7005930003" |
| `bas_dt` | str | κΈ°μ¤€μΌμ | "20250819" |
| `mrkt_ctg` | str | μ‹μ¥κµ¬λ¶„ | "KOSPI", "KOSDAQ", "KONEX" |
| `num_of_rows` | int | μ΅°ν κ±΄μ | 1-100 (κΈ°λ³Έ: 10) |

### get_securities_price_info_ssl
μμµμ¦κ¶(ν€λ“) μ‹μ„Έ μ΅°νμ© - νλΌλ―Έν„°λ” μ£Όμ‹κ³Ό λ™μΌ

## π“‹ μ‘λ‹µ λ°μ΄ν„° κµ¬μ΅°

### μ„±κ³µ μ‘λ‹µ (JSON)
```json
{
  "header": {
    "resultCode": "00",
    "resultMsg": "μ •μƒμ²λ¦¬"
  },
  "body": {
    "totalCount": "1",
    "items": {
      "item": [{
        "basDt": "20250819",        // κΈ°μ¤€μΌμ
        "itmsNm": "μ‚Όμ„±μ „μ",       // μΆ…λ©λ…
        "clpr": "75000",           // μΆ…κ°€(ν„μ¬κ°€)
        "vs": "1000",              // μ „μΌλ€λΉ„
        "fltRt": "1.35",           // λ“±λ½λ¥ 
        "mkp": "74500",            // μ‹κ°€
        "hipr": "75500",           // κ³ κ°€
        "lopr": "74000",           // μ €κ°€
        "trqu": "25367890"         // κ±°λλ‰
      }]
    }
  }
}
```

## β οΈ SSL λ³΄μ• κ΄€λ ¨ μ£Όμμ‚¬ν•­

### κ°λ° ν™κ²½
- ν•κµ­ μ •λ¶€ API SSL μΈμ¦μ„ λ¬Έμ λ΅ `verify=False` μ‚¬μ©
- `check_hostname=False`λ΅ νΈμ¤νΈλ… κ²€μ¦ λΉ„ν™μ„±ν™”
- TLS 1.2 κ°•μ  μ‚¬μ©μΌλ΅ νΈν™μ„± ν™•λ³΄

### ν”„λ΅λ•μ… ν™κ²½
```python
# ν”„λ΅λ•μ…μ—μ„λ” μ μ ν• μΈμ¦μ„ κ²€μ¦ κ³ λ ¤
# ν„μ¬ μ„¤μ •μ€ ν•κµ­ μ •λ¶€ API νΈν™μ„±μ„ μ„ν• μ„μ‹ μ΅°μΉ
```

## π” λ¬Έμ  ν•΄κ²°

### API νΈμ¶ μ‹¤ν¨
1. **API ν‚¤ ν™•μΈ**: `.env` νμΌμ `STOCK_API_KEY` μ κ²€
2. **λ„¤νΈμ›ν¬ μ—°κ²°**: μ •λ¶€ API μ„λ²„ μ—°κ²° μƒνƒ ν™•μΈ
3. **μ‚¬μ©λ‰ ν•λ„**: API μΌμΌ/μ›”λ³„ νΈμ¶ ν•λ„ ν™•μΈ

### SSL μ¤λ¥
```bash
# μΌλ°μ μΈ SSL μ¤λ¥λ” μλ™ ν•΄κ²°λ¨
# SSL κ΄€λ ¨ λ΅κ·Έκ°€ λ‚νƒ€λ‚λ”λΌλ„ μ •μƒ λ™μ‘
```

### μ‘λ‹µ ν•μ‹ μ¤λ¥
- μ •λ¶€ APIλ” JSON μ”μ²­μ—λ„ XML λ°ν™ν•  μ μμ
- μλ™μΌλ΅ ν•μ‹μ„ κ°μ§€ν•μ—¬ μ²λ¦¬

## π“ κ΄€λ ¨ λ¬Έμ„

- [κ³µκ³µλ°μ΄ν„°ν¬ν„Έ API λ¬Έμ„](https://www.data.go.kr/data/15094808/openapi.do)
- [Google ADK κ°€μ΄λ“](https://cloud.google.com/adk)
- [λ©”μΈ README.md](../README.md)

## π—οΈ μ•„ν‚¤ν…μ²

```
stock_analytics/
β”β”€β”€ agent.py          # λ©”μΈ μ—μ΄μ „νΈ μ •μ
β”β”€β”€ config.py         # μ„¤μ • λ° ν™κ²½λ³€μ
β”β”€β”€ prompt.py         # AI ν”„λ΅¬ν”„νΈ ν…ν”λ¦Ώ
β”β”€β”€ ssl_adapter.py    # SSL νΈν™μ„± μ–΄λ‘ν„°
β”β”€β”€ ssl_api_tool.py   # SSL νΈν™ API ν•¨μ
β”β”€β”€ stock_openapi.yml # OpenAPI λ…μ„Έμ„
β””β”€β”€ __init__.py       # λ¨λ“ μ΄κΈ°ν™”
```

## β­ λ‚μ΄λ„: μ¤‘κΈ‰ (β­β­β†)

### ν•™μµ ν¬μΈνΈ
- SSL/TLS νΈν™μ„± ν•΄κ²° ν¨ν„΄
- μ •λ¶€ API μ—°λ™ λ¨λ²”μ‚¬λ΅€  
- μ»¤μ¤ν…€ HTTP μ–΄λ‘ν„° κµ¬ν„
- μ‹¤μ‹κ°„ κΈμµ λ°μ΄ν„° μ²λ¦¬

---

π’΅ **ν**: μ΄ μ—μ΄μ „νΈλ” ν•κµ­ κΈμµ λ°μ΄ν„°μ νΉμμ„±(SSL λ¬Έμ )μ„ ν•΄κ²°ν•λ” μ‹¤μ©μ μΈ μμ μ…λ‹λ‹¤. λ‹¤λ¥Έ μ •λ¶€ API μ—°λ™ μ‹μ—λ„ μ μ‚¬ν• ν¨ν„΄μ„ ν™μ©ν•  μ μμµλ‹λ‹¤.